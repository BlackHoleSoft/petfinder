# Описание проекта petfinder

## Основные требования к функционалу

Petfinder - приложение для поиска потерянных домашних животных. Суть приложения очень проста - хозяева потеряшек публикуют объявление об утере, где указывают основные данные про животного и предполагаемое место на карте, а так же свои контактные данные. Волонтеры могут публиковать на карте пины, где они видели какое-либо животное, которое могло потеряться. Таким образом, пользователи могут смотреть на карте текущую ситуацию, кто где потерялся или кого где видели.

Приложение состоит из основных разделов:
- лента событий с картой, она же главная страница, на которой отображаются пины и объявления о пропаже
- страница публикации объявления о пропаже
- страница публикации пина (когда волонтер увидел потенциально потерявшееся животное)
- личный кабинет хозяина (ЛК) со списком объявлений
- страница авторизации (для хозяев)

### Шапка приложения

Отображается во всех разделах. Состоит из (слева-направо):
- название приложения
- навигация по разделам
- кнопка входа или выхода, в зависимости от текущего состояния пользователя

Список разделов в навигации:
- Лента
- Мои публикации (переход в ЛК)
- Иконка плюса (создание объявления о пропаже или пина)

При нажатии на иконку плюса открывается модальное окно создания публикации.

### Модальное окно создания публикации

Модальное окно с выбором типа публикации содержит следующие пункты для выбора:
- "Мой питомец потерялся"
- "Я видел потеряшку"

В зависимости от выбранного действия открывается соответствующая форма создания публикации.

Если неавторизованный пользователь нажимает на "Мой питомец потерялся", то его перекидывает на форму входа, при этом сохраняется returnUrl, чтобы после входа пользователь перешел сразу на форму создания объявления.

### Раздел Главная

Сверху расположена карта местности, на котрой располагаются пины и объявления. Пин выглядит как небольшой круг с фото или заглушкой изображения животного. Объявление - квадратный пин со скругленными углами с фото потерявшегося животного.

При клике на пин открывается popup с информацией по пину - фото или изображение-заглушка, тип животного, приметы, описание, контакты нашедшего.
При клике на объявление открывается popup с информацией из объявления - фото животного, кличка, тип животного, приметы, описание, контакты хозяина

Пин для увиденного животного держится на карте в течение одной недели (7 суток) с даты публикации, его нельзя редактировать или удалять.
Объявление о пропаже держится на карте до 30 суток от момента публикации, или пока хозяин не снимет его с публикации.

Ниже, под картой, расположена лента событий. Кадое событие - это небольшая карточка, которая содержит фото или заглушку, тип события, поля из объекта события.
Сверху ленты расположена кнопка с иконкой плюса для создания объявления или пина. При клике на кнопку открывается модальное окно создания публикации.

Ниже выводится список событий в порядке убывания, от новых к старым. Должна быть предусмотрена простая пагинация ленты.

Есть несколько типов событий:
- объявление о пропаже
- увидели потеряшку
- нашли потеряшку

Событие для объявления о пропаже или "нашли потеряшку" содержит поля из объявления - тип животного, кличка, приметы, описание, контакты хозяина. Для "нашли потеряшку" фон становится зеленым.

Событие "увидели потеряшку" содержит поля для пина увиденного животного - тип животного, приметы, описание. Фон карточки события желтый.

### Страница публикации объявления о пропаже

Страница содержит форму с необходимыми полями для публикации объявления.

Список полей:
- фото (обязательное), загрузка изображения с устройства
- кличка (обязательное)
- тип животного (выбор из выпадающего списка, обязательное)
- приметы (список примет через запятую)
- описание (текстовое поле с многострочным вводом)
- контакты (текстовое поле, обязательное)
- выбор точки на карте

Список типов животных:
- кошка
- собака
- иной зверь

Внизу формы есть кнопка "Опубликовать"

### Страница публикации пина

Страница содержит форму с необходимыми полями для публикации пина.

Список полей:
- фото, загрузка изображения с устройства
- тип животного (выбор из выпадающего списка, по аналогии с объявлением, обязательное)
- приметы (список примет через запятую)
- описание (текстовое поле с многострочным вводом)
- контакты (текстовое поле)
- выбор точки на карте

Внизу формы есть кнопка "Опубликовать"

### Личный кабинет

Содержит шапку с именем пользователя и фото из VK. Ниже расположен список объявлений.

Каждая карточка объявления содержит фото, кличку, дату публикации объявления и статус. Справа расположена кнопка удаления.

Список возможных статусов:
- опубликовано
- найдено
- истекло

При нажатии на карточку объявления, открывается форма для редактирования объявления, аналогичная форме публикации, только с предзаполненными данными в полях.

При нажатии на кнопку удаления (снять с публикации) появляется модальное окно с выбором причины.

Модальное окно содержит заголовок "Укажите причину снятия с публикации". Далее расположены radiobutton с выбором причины - "Животное найдено" или "Другое". Ниже текст "Вы уверены, что хотите снять объявление с публикации? Восстановить его будет нельзя.". В самом низу модального окна две кнопки - "Снять с публикации" и "Отмена".


### Страница входа

Содержит в центре страницы небольшую форму для входа через VK. Сверху расположен заголовок "Войти в систему". Ниже текст: "Для публикации объявлений о пропаже необходимо авторизоваться в системе с помощью VK ID". Снизу расположена кнопка "Войти".

При нажатии на "Войти", система производит авторизацию с помощью OAuth и перенаправляет на главную. В случае, если был указан returnUrl, система перенаправляет пользователя по этому url.

## Основные кейсы

Кейс от лица хозяина (публикация):
1. хозяин авторизуется в системе (пока через OAuth VK)
2. нажимает на кнопку создания объявления о пропаже (по кнопке на главной или в ЛК)
3. заполняет основные данные
4. нажимает опубликовать
5. объявление появляется в ленте событий и на карте, каждое объявление держится до 30 дней, потом пропадает
   
Кейс от лица хозяина (закрытие публикации):
1. хозяин авторизуется в системе (пока через OAuth VK)
2. переходит в ЛК
3. нажимает кнопку "снять с публикации" на объявлении
4. появляется модальное окно с выбором причины снятия - "нашлось" или "другое"
5. после этого объявление пропадает с карты и из личного кабинета хозяина
6. если животное было найдено, в ленту публикуется событие об успешном нахождении животного

Кейс от лица гостя (волонтер или обычный человек) - создание пина:
1. заходит на главную страницу
2. нажимает кнопку "видел потеряшку"
3. открывается страница публикации пина, где можно выбрать параметры животного и прикрепить фото
4. нажимает опубликовать
5. пин появляется на карте и появляется событие в ленте

## Требования к организации проекта

Проект фронтенда реализован на next.js и typescript. Для стилизации используется Tailwind. Для запросов к бэкенду и кэшированию результатов Tanstack Query.

Список используемых технологий:
- next.js with turbopack and typescript
- Tailwind CSS
- Tanstack Query
- Zod для валидации api
- тесты на Jest и Cypress

## Пояснения для ИИ агента

Необходимо создать современный, хорошо поддерживаемый, красивый продукт. Поэтому обращай внимание на SEO оптимизацию верстки, доступность, придерживайся лаконичного дизайна.

При создании компонентов используй следующую структуру: 

- myComponent/index.ts (для экспорта компонента во вне)
- myComponent/myComponent.tsx (сам компонент)
- myComponent/myComponent.interface.ts (для типов и интерфейсов компонента)
- myComponent/myComponent.utils.ts (для вспомогательных функций)
- myComponent/myComponent.hooks.ts (для внутренних хуков)

Для струтуризации и разделения компонентов на различные слои используй принципы atomic design. Внутри папки src/components должны располагаться следующие разделы:
- atoms
- molecules
- organisms
- templates
- pages

На каждом уровне размещай соответствующие компоненты.

Можно добавлять еще части и подкомпоненты в директории myComponent/components

При реализации функционала придерживайся принципов SOLID, DRY и современных принципов реализации чистого и читаемого кода.